{"ast":null,"code":"import _slicedToArray from\"C:/Users/admin/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import\"./user.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),errors=_useState6[0],setErrors=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];useEffect(function(){if(localStorage.getItem(\"token\")!==null){window.location.replace(\"http://localhost:3000/\");}else{setLoading(false);}},[]);var onSubmit=function onSubmit(e){e.preventDefault();var user={username:username,password:password};fetch(\"http://127.0.0.1:8000/api/v1/users/auth/login/\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(user)}).then(function(res){return res.json();}).then(function(data){if(data.key){localStorage.clear();localStorage.setItem(\"token\",data.key);window.location.replace(\"http://localhost:3000/\");}else{setUsername(\"\");setPassword(\"\");localStorage.clear();setErrors(true);}});};return/*#__PURE__*/_jsx(\"div\",{className:\"background\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[loading===false&&/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),errors===true&&/*#__PURE__*/_jsx(\"h2\",{children:\"Cannot log in with provided credentials\"}),loading===false&&/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Username\",name:\"username\",type:\"text\",value:username,required:true,onChange:function onChange(e){return setUsername(e.target.value);}}),\" \",/*#__PURE__*/_jsx(\"input\",{placeholder:\"Password\",name:\"password\",type:\"password\",value:password,required:true,onChange:function onChange(e){return setPassword(e.target.value);},pattern:\".{8,}\"}),\" \",/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Log in\",className:\"submit\"}),/*#__PURE__*/_jsx(Link,{className:\"new\",to:\"/signup\",children:\"Create New Account\"})]})]})});};export default Login;","map":{"version":3,"sources":["C:/Users/admin/Desktop/frontend/src/pages/user/login.js"],"names":["React","useState","useEffect","Link","Login","username","setUsername","password","setPassword","errors","setErrors","loading","setLoading","localStorage","getItem","window","location","replace","onSubmit","e","preventDefault","user","fetch","method","headers","body","JSON","stringify","then","res","json","data","key","clear","setItem","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"./user.css\";\n\nconst Login = () => {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [errors, setErrors] = useState(false);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (localStorage.getItem(\"token\") !== null) {\n      window.location.replace(\"http://localhost:3000/\");\n    } else {\n      setLoading(false);\n    }\n  }, []);\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n\n    const user = {\n      username: username,\n      password: password,\n    };\n\n    fetch(\"http://127.0.0.1:8000/api/v1/users/auth/login/\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(user),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.key) {\n          localStorage.clear();\n          localStorage.setItem(\"token\", data.key);\n          window.location.replace(\"http://localhost:3000/\");\n        } else {\n          setUsername(\"\");\n          setPassword(\"\");\n          localStorage.clear();\n          setErrors(true);\n        }\n      });\n  };\n\n  return (\n    <div className=\"background\">\n      <div className=\"form-container\">\n        {loading === false && <h1>Login</h1>}\n        {errors === true && <h2>Cannot log in with provided credentials</h2>}\n        {loading === false && (\n          <form className=\"form\" onSubmit={onSubmit}>\n            <input\n              placeholder=\"Username\"\n              name=\"username\"\n              type=\"text\"\n              value={username}\n              required\n              onChange={(e) => setUsername(e.target.value)}\n            />{\" \"}\n            <input\n              placeholder=\"Password\"\n              name=\"password\"\n              type=\"password\"\n              value={password}\n              required\n              onChange={(e) => setPassword(e.target.value)}\n              pattern=\".{8,}\"\n            />{\" \"}\n            <input type=\"submit\" value=\"Log in\" className=\"submit\" />\n            <Link className=\"new\" to=\"/signup\">\n              Create New Account\n            </Link>\n          </form>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}