{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router\";\nimport \"./createpost.css\";\n\nconst CreatePost = () => {\n  _s();\n\n  const [username, setUsername] = useState(\"\");\n  const [title, setTitle] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [image, setImage] = useState(null);\n  const history = useHistory();\n\n  const AddPost = async () => {\n    let formField = new FormData();\n    formField.append(\"title\", title);\n    formField.append(\"description\", description);\n\n    if (image !== null) {\n      formField.append(\"image\", image);\n    }\n\n    await axios({\n      method: \"post\",\n      url: \"http://127.0.0.1:8000/api/\",\n      data: formField\n    }).then(response => {\n      console.log(response.data);\n      history.push(\"/\");\n    });\n  };\n\n  useEffect(() => {\n    if (localStorage.getItem(\"token\") === null) {} else {\n      fetch(\"http://127.0.0.1:8000/api/v1/users/auth/user/\", {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Token ${localStorage.getItem(\"token\")}`\n        }\n      }).then(res => res.json()).then(data => {\n        setUsername(data.username);\n      });\n    }\n  }, []);\n  /*\r\n  return (\r\n    <div className=\"background\">\r\n      <div className=\"post-container\">\r\n        <form className=\"form\">\r\n          <input id=\"user\" type=\"text\" style={{ display: \"none\" }} />\r\n          <input\r\n            className=\"createtitle\"\r\n            type=\"text\"\r\n            placeholder=\"Title\"\r\n            value={title}\r\n            name=\"title\"\r\n            required\r\n            onChange={(e) => setTitle(e.target.value)}\r\n          />\r\n          <textarea\r\n            className=\"createdesc\"\r\n            type=\"text\"\r\n            placeholder=\"Description...\"\r\n            name=\"description\"\r\n            value={description}\r\n            onChange={(e) => setDescription(e.target.value)}\r\n          />\r\n          <div className=\"form-bottom\">\r\n            <input\r\n              className=\"upload\"\r\n              type=\"file\"\r\n              name=\"image\"\r\n              src={image}\r\n              onChange={(e) => setImage(e.target.files[0])}\r\n            />\r\n            <button onClick={AddPost} className=\"createsubmit\">\r\n              POST\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  ); */\n};\n\n_s(CreatePost, \"O8Q5vlt/jrq8kGP35w/87VUGNXg=\", false, function () {\n  return [useHistory];\n});\n\n_c = CreatePost;\nexport default CreatePost;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreatePost\");","map":{"version":3,"sources":["C:/Users/arcan/Desktop/HOWTO/frontend/src/pages/CreatePost.js"],"names":["axios","useState","useEffect","useHistory","CreatePost","username","setUsername","title","setTitle","description","setDescription","image","setImage","history","AddPost","formField","FormData","append","method","url","data","then","response","console","log","push","localStorage","getItem","fetch","headers","Authorization","res","json"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,OAAO,kBAAP;;AAEA,MAAMC,UAAU,GAAG,MAAM;AAAA;;AACvB,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BL,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACM,KAAD,EAAQC,QAAR,IAAoBP,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACQ,WAAD,EAAcC,cAAd,IAAgCT,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACU,KAAD,EAAQC,QAAR,IAAoBX,QAAQ,CAAC,IAAD,CAAlC;AAEA,QAAMY,OAAO,GAAGV,UAAU,EAA1B;;AAEA,QAAMW,OAAO,GAAG,YAAY;AAC1B,QAAIC,SAAS,GAAG,IAAIC,QAAJ,EAAhB;AAEAD,IAAAA,SAAS,CAACE,MAAV,CAAiB,OAAjB,EAA0BV,KAA1B;AACAQ,IAAAA,SAAS,CAACE,MAAV,CAAiB,aAAjB,EAAgCR,WAAhC;;AACA,QAAIE,KAAK,KAAK,IAAd,EAAoB;AAClBI,MAAAA,SAAS,CAACE,MAAV,CAAiB,OAAjB,EAA0BN,KAA1B;AACD;;AAED,UAAMX,KAAK,CAAC;AACVkB,MAAAA,MAAM,EAAE,MADE;AAEVC,MAAAA,GAAG,EAAE,4BAFK;AAGVC,MAAAA,IAAI,EAAEL;AAHI,KAAD,CAAL,CAIHM,IAJG,CAIGC,QAAD,IAAc;AACpBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACF,IAArB;AACAP,MAAAA,OAAO,CAACY,IAAR,CAAa,GAAb;AACD,KAPK,CAAN;AAQD,GAjBD;;AAkBAvB,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIwB,YAAY,CAACC,OAAb,CAAqB,OAArB,MAAkC,IAAtC,EAA4C,CAC3C,CADD,MACO;AACLC,MAAAA,KAAK,CAAC,+CAAD,EAAkD;AACrDV,QAAAA,MAAM,EAAE,KAD6C;AAErDW,QAAAA,OAAO,EAAE;AACP,0BAAgB,kBADT;AAEPC,UAAAA,aAAa,EAAG,SAAQJ,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8B;AAF/C;AAF4C,OAAlD,CAAL,CAOGN,IAPH,CAOSU,GAAD,IAASA,GAAG,CAACC,IAAJ,EAPjB,EAQGX,IARH,CAQSD,IAAD,IAAU;AACdd,QAAAA,WAAW,CAACc,IAAI,CAACf,QAAN,CAAX;AACD,OAVH;AAWD;AACF,GAfQ,EAeN,EAfM,CAAT;AAiBA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACC,CAlFD;;GAAMD,U;UAMYD,U;;;KANZC,U;AAoFN,eAAeA,UAAf","sourcesContent":["import axios from \"axios\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\nimport \"./createpost.css\";\r\n\r\nconst CreatePost = () => {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [title, setTitle] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [image, setImage] = useState(null);\r\n\r\n  const history = useHistory();\r\n\r\n  const AddPost = async () => {\r\n    let formField = new FormData();\r\n\r\n    formField.append(\"title\", title);\r\n    formField.append(\"description\", description);\r\n    if (image !== null) {\r\n      formField.append(\"image\", image);\r\n    }\r\n\r\n    await axios({\r\n      method: \"post\",\r\n      url: \"http://127.0.0.1:8000/api/\",\r\n      data: formField,\r\n    }).then((response) => {\r\n      console.log(response.data);\r\n      history.push(\"/\");\r\n    });\r\n  };\r\n  useEffect(() => {\r\n    if (localStorage.getItem(\"token\") === null) {\r\n    } else {\r\n      fetch(\"http://127.0.0.1:8000/api/v1/users/auth/user/\", {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Token ${localStorage.getItem(\"token\")}`,\r\n        },\r\n      })\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n          setUsername(data.username);\r\n        });\r\n    }\r\n  }, []);\r\n\r\n  /*\r\n  return (\r\n    <div className=\"background\">\r\n      <div className=\"post-container\">\r\n        <form className=\"form\">\r\n          <input id=\"user\" type=\"text\" style={{ display: \"none\" }} />\r\n          <input\r\n            className=\"createtitle\"\r\n            type=\"text\"\r\n            placeholder=\"Title\"\r\n            value={title}\r\n            name=\"title\"\r\n            required\r\n            onChange={(e) => setTitle(e.target.value)}\r\n          />\r\n          <textarea\r\n            className=\"createdesc\"\r\n            type=\"text\"\r\n            placeholder=\"Description...\"\r\n            name=\"description\"\r\n            value={description}\r\n            onChange={(e) => setDescription(e.target.value)}\r\n          />\r\n          <div className=\"form-bottom\">\r\n            <input\r\n              className=\"upload\"\r\n              type=\"file\"\r\n              name=\"image\"\r\n              src={image}\r\n              onChange={(e) => setImage(e.target.files[0])}\r\n            />\r\n            <button onClick={AddPost} className=\"createsubmit\">\r\n              POST\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  ); */\r\n};\r\n\r\nexport default CreatePost;\r\n"]},"metadata":{},"sourceType":"module"}