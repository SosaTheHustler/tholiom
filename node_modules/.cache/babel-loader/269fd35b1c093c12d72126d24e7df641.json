{"ast":null,"code":"import _slicedToArray from\"C:/Users/admin/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import\"./user.css\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Signup=function Signup(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password1=_useState4[0],setPassword1=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password2=_useState6[0],setPassword2=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),errors=_useState8[0],setErrors=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];useEffect(function(){if(localStorage.getItem(\"token\")!==null){}else{setLoading(false);}},[]);var onSubmit=function onSubmit(e){e.preventDefault();var user={username:username,password1:password1,password2:password2};fetch(\"http://127.0.0.1:8000/api/v1/users/auth/register/\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(user)}).then(function(res){return res.json();}).then(function(data){if(data.key){localStorage.clear();localStorage.setItem(\"token\",data.key);window.location.replace(\"http://localhost:3000/login\");}else{setUsername(\"\");setPassword1(\"\");setPassword2(\"\");localStorage.clear();setErrors(true);}});};return/*#__PURE__*/_jsx(\"div\",{className:\"background\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[loading===false&&/*#__PURE__*/_jsx(\"h1\",{children:\"Signup\"}),/*#__PURE__*/_jsx(\"br\",{}),errors===true&&/*#__PURE__*/_jsx(\"h2\",{children:\"Cannot signup with provided credentials\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Username\",name:\"Username\",type:\"text\",value:username,onChange:function onChange(e){return setUsername(e.target.value);},required:true}),\" \",/*#__PURE__*/_jsx(\"input\",{placeholder:\"Password\",name:\"password1\",type:\"password\",value:password1,onChange:function onChange(e){return setPassword1(e.target.value);},required:true,pattern:\".{8,}\"}),\" \",/*#__PURE__*/_jsx(\"input\",{placeholder:\" Confirm Password\",name:\"password2\",type:\"password\",value:password2,onChange:function onChange(e){return setPassword2(e.target.value);},required:true,pattern:\".{8,}\"}),\" \",/*#__PURE__*/_jsx(\"input\",{className:\"submit\",type:\"submit\",value:\"Signup\"}),/*#__PURE__*/_jsx(Link,{className:\"new\",to:\"/login\",children:\"Already have an account?\"})]})]})});};export default Signup;","map":{"version":3,"sources":["C:/Users/admin/Desktop/frontend/src/pages/user/signup.js"],"names":["React","useState","useEffect","Link","Signup","username","setUsername","password1","setPassword1","password2","setPassword2","errors","setErrors","loading","setLoading","localStorage","getItem","onSubmit","e","preventDefault","user","fetch","method","headers","body","JSON","stringify","then","res","json","data","key","clear","setItem","window","location","replace","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./user.css\";\nimport { Link } from \"react-router-dom\";\n\nconst Signup = () => {\n  const [username, setUsername] = useState(\"\");\n  const [password1, setPassword1] = useState(\"\");\n  const [password2, setPassword2] = useState(\"\");\n  const [errors, setErrors] = useState(false);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (localStorage.getItem(\"token\") !== null) {\n    } else {\n      setLoading(false);\n    }\n  }, []);\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n\n    const user = {\n      username: username,\n      password1: password1,\n      password2: password2,\n    };\n\n    fetch(\"http://127.0.0.1:8000/api/v1/users/auth/register/\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(user),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.key) {\n          localStorage.clear();\n          localStorage.setItem(\"token\", data.key);\n          window.location.replace(\"http://localhost:3000/login\");\n        } else {\n          setUsername(\"\");\n          setPassword1(\"\");\n          setPassword2(\"\");\n          localStorage.clear();\n          setErrors(true);\n        }\n      });\n  };\n\n  return (\n    <div className=\"background\">\n      <div className=\"form-container\">\n        {loading === false && <h1>Signup</h1>}\n        <br></br>\n        {errors === true && <h2>Cannot signup with provided credentials</h2>}\n        <form className=\"form\" onSubmit={onSubmit}>\n          <input\n            placeholder=\"Username\"\n            name=\"Username\"\n            type=\"text\"\n            value={username}\n            onChange={(e) => setUsername(e.target.value)}\n            required\n          />{\" \"}\n          <input\n            placeholder=\"Password\"\n            name=\"password1\"\n            type=\"password\"\n            value={password1}\n            onChange={(e) => setPassword1(e.target.value)}\n            required\n            pattern=\".{8,}\"\n          />{\" \"}\n          <input\n            placeholder=\" Confirm Password\"\n            name=\"password2\"\n            type=\"password\"\n            value={password2}\n            onChange={(e) => setPassword2(e.target.value)}\n            required\n            pattern=\".{8,}\"\n          />{\" \"}\n          <input className=\"submit\" type=\"submit\" value=\"Signup\" />\n          <Link className=\"new\" to=\"/login\">\n            Already have an account?\n          </Link>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}